(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{8312:function(a,b,c){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return c(797)}])},797:function(a,b,c){"use strict";c.r(b),c.d(b,{default:function(){return x}});var d=c(5893);function e(a,b){(null==b||b>a.length)&&(b=a.length);for(var c=0,d=Array(b);c<b;c++)d[c]=a[c];return d}function f(a,b){return function(a){if(Array.isArray(a))return a}(a)||function(a){if("undefined"!=typeof Symbol&&null!=a[Symbol.iterator]||null!=a["@@iterator"])return Array.from(a)}(a,b)||function(a,b){if(a){if("string"==typeof a)return e(a,b);var c=Object.prototype.toString.call(a).slice(8,-1);if("Object"===c&&a.constructor&&(c=a.constructor.name),"Map"===c||"Set"===c)return Array.from(c);if("Arguments"===c||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(c))return e(a,b)}}(a,b)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(a,b,c,d,e,f,g){try{var h=a[f](g),i=h.value}catch(j){c(j);return}h.done?b(i):Promise.resolve(i).then(d,e)}function h(a){return function(){var b=this,c=arguments;return new Promise(function(d,e){var f=a.apply(b,c);function h(a){g(f,d,e,h,i,"next",a)}function i(a){g(f,d,e,h,i,"throw",a)}h(void 0)})}}var i=c(4051),j=c.n(i),k=c(7294),l={OPERATIONAL:"operational",PARTIAL_OUTAGE:"partial_outage",OUTAGE:"outage",UNKNOWN:"unknown"};function m(a){return n.apply(this,arguments)}function n(){return(n=h(j().mark(function a(b){var c,d,e,g,h,i;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://raw.githubusercontent.com/Cogoport/status.cogoport/cogo-status/public/status/".concat(b,"_report.log"));case 2:return c=a.sent,a.next=5,c.text();case 5:return e=(d=a.sent).split("\n"),g=[],h=[],e.forEach(function(a){var b=f(a.split(", "),3),c=b[0],d=b[1],e=b[2];g.push({id:c,response_time:e,status:d,created_at:c})}),(i=Object.values(g.reduce(function(a,b){var c=f(b.created_at.substr(0,10).split("-"),3),d=c[0],e=c[1],g=c[2],h="".concat(g,"_").concat(e,"_").concat(d);return a[h]=a[h]||{date:b.created_at,logs:[]},a[h].logs.push(b),a},{}))).forEach(function(a){var b=0;a.logs.forEach(function(a){a.response_time&&(b+=Number(a.response_time.replaceAll("s","")))});var c="";c=0===a.logs.length?"unknown":a.logs.every(function(a){return"success"===a.status})?l.OPERATIONAL:a.logs.every(function(a){return"failed"===a.status})?l.OUTAGE:l.PARTIAL_OUTAGE,h.push({avg_response_time:b/a.logs.length,current_status:a.logs[a.logs.length-1].status,date:a.date.substr(0,10),status:c})}),a.abrupt("return",o(h));case 13:case"end":return a.stop()}},a)}))).apply(this,arguments)}function o(a){for(var b=function(){var b=new Date(d.getFullYear(),d.getMonth(),d.getDate()-e),f=a.find(function(a){return a.date===b.toISOString().substr(0,10)});c.push({avg_response_time:(null==f?void 0:f.avg_response_time)||0,current_status:(null==f?void 0:f.current_status)||"unknown",date:b.toISOString().substr(0,10),status:(null==f?void 0:f.status)||"unknown"})},c=[],d=new Date,e=-1;e<89;e+=1)b();return c.reverse()}var p=function(){var a=(0,k.useState)([]),b=a[0],c=a[1],d=(0,k.useState)(!1),e=d[0],g=d[1],i=(0,k.useState)(),l=i[0],n=i[1];return(0,k.useEffect)(function(){var a;(a=h(j().mark(function a(){var b,d,e,h,i,k,l,o,p,q;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g(!0),a.prev=1,a.next=4,fetch("./urls.cfg");case 4:return b=a.sent,a.next=7,b.text();case 7:e=(d=a.sent).split("\n"),h=[],i=0;case 11:if(!(i<e.length)){a.next=23;break}if(o=(l=f((k=e[i]).split("="),2))[0],p=l[1],!(!o||!p)){a.next=16;break}return a.abrupt("continue",20);case 16:return a.next=18,m(o);case 18:(q=a.sent).length>0?h.push({id:i,name:o,status:q[q.length-1].status,logs:q}):h.push({id:i,name:o,status:"unknown",logs:q});case 20:i++,a.next=11;break;case 23:c(h),a.next=29;break;case 26:a.prev=26,a.t0=a.catch(1),n(a.t0);case 29:return a.prev=29,g(!1),a.finish(29);case 32:case"end":return a.stop()}},a,null,[[1,26,29,32]])})),function(){return a.apply(this,arguments)})()},[]),[b,e,l]},q=function(a){var b=a.item,c=a.show;return(0,d.jsx)(d.Fragment,{children:c&&(0,d.jsxs)("div",{className:"absolute card mt-10 pl-5 pr-5",children:[(0,d.jsxs)("p",{children:["Date: ",b.date]}),(0,d.jsxs)("p",{children:["Status: ",b.status]})]})})},r=function(a){var b=a.item,c=(0,k.useState)(!1),e=c[0],f=c[1];return(0,d.jsx)(d.Fragment,{children:function(a){switch(a){case"unknown":return(0,d.jsx)("div",{onMouseOver:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:"bg-gray-300 ml-0.5 sm:rounded-lg flex-1 h-8",children:(0,d.jsx)(q,{item:b,show:e})});case l.OUTAGE:return(0,d.jsx)("div",{onMouseOver:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:"bg-red-500 ml-0.5 sm:rounded-lg flex-1 h-8",children:(0,d.jsx)(q,{item:b,show:e})});case l.PARTIAL_OUTAGE:return(0,d.jsx)("div",{onMouseOver:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:"bg-orange-300 ml-0.5 sm:rounded-lg flex-1 h-8",children:(0,d.jsx)(q,{item:b,show:e})});default:return(0,d.jsx)("div",{onMouseOver:function(){return f(!0)},onMouseLeave:function(){return f(!1)},className:"bg-green-500 ml-0.5 sm:rounded-lg flex-1 h-8",children:(0,d.jsx)(q,{item:b,show:e})})}}(b.status)})},s=function(a){var b=a.item,c=function(){return(null==b?void 0:b.status)===l.OPERATIONAL?(0,d.jsxs)("svg",{className:"h-6 w-6 flex-none fill-sky-100 stroke-green-500 stroke-2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11"}),(0,d.jsx)("path",{d:"m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9",fill:"none"})]}):(null==b?void 0:b.status)===l.PARTIAL_OUTAGE?(0,d.jsx)("svg",{className:"h-8 w-8 flex-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"orange",children:(0,d.jsx)("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.94v-.05a21.74 21.74 0 1 1 43.44 0z"})}):(null==b?void 0:b.status)===l.OUTAGE?(0,d.jsx)("svg",{className:"h-8 w-8 flex-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"red",children:(0,d.jsx)("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.94v-.05a21.74 21.74 0 1 1 43.44 0z"})}):(0,d.jsxs)("svg",{className:"h-6 w-6 flex-none fill-sky-100 stroke-green-500 stroke-2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11"}),(0,d.jsx)("path",{d:"m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9",fill:"none"})]})};return(0,d.jsxs)("div",{className:"",children:[(0,d.jsxs)("div",{className:"flex",children:[(0,d.jsx)(c,{}),(0,d.jsxs)("div",{className:"w-full flex justify-between items-baseline",children:[(0,d.jsx)("p",{className:"ml-4 text-xl font-semibold leading-6 text-gray-900",children:function(a){switch(a){case"backend_service":return"Backend Service";case"frontend_admin":return"Frontend Admin";case"frontend_partner":return"Frontend Partner";case"frontend_app":return"Frontend App";default:return"New URL"}}(b.name)}),(0,d.jsxs)("p",{className:"text-xs text-gray-400 items-baseline self-baseline",children:[" ",Math.round(100*b.logs.filter(function(a){return a.status===l.OPERATIONAL}).length/90),"% operational in last 90 days"]})]})]}),(0,d.jsx)("div",{className:"flex mt-5 mb-5",children:(b.logs||[]).map(function(a){return(0,d.jsx)(r,{item:a},a.date)})})]})};function t(a){return u.apply(this,arguments)}function u(){return(u=h(j().mark(function a(b){var c,d,e,g,h,i,k,l;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,fetch("https://raw.githubusercontent.com/Cogoport/status.cogoport/cogo-status/public/status/".concat(b,"_report.log"));case 2:return c=a.sent,a.next=5,c.text();case 5:return e=(d=a.sent).split("\n"),a.prev=7,g=e[e.length-2],i=(h=f(g.split(", "),3))[0],k=h[1],l=h[2],a.abrupt("return",{name:b,status:k,date:i});case 13:return a.prev=13,a.t0=a.catch(7),a.abrupt("return",{name:b,status:"unknown",date:void 0});case 16:case"end":return a.stop()}},a,null,[[7,13]])}))).apply(this,arguments)}var v=function(){var a=(0,k.useState)(),b=a[0],c=a[1],d=(0,k.useState)(!1),e=d[0],g=d[1],i=(0,k.useState)(),m=i[0],n=i[1];return(0,k.useEffect)(function(){var a;(a=h(j().mark(function a(){var b,d,e,h,i,k,m,o,p,q;return j().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return g(!0),a.prev=1,a.next=4,fetch("./urls.cfg");case 4:return b=a.sent,a.next=7,b.text();case 7:e=(d=a.sent).split("\n"),h=[],i=0;case 11:if(!(i<e.length)){a.next=23;break}if(o=(m=f((k=e[i]).split("="),2))[0],p=m[1],!(!o||!p)){a.next=16;break}return a.abrupt("continue",20);case 16:return a.next=18,t(o);case 18:q=a.sent,h.push(q);case 20:i++,a.next=11;break;case 23:h.every(function(a){return"success"===a.status})?c({title:"All System Operational",status:l.OPERATIONAL,datetime:h[0].date}):h.every(function(a){return"failed"===a.status})?c({title:"Outage",status:l.OUTAGE,datetime:h[0].date}):h.every(function(a){return""===a.status})?c({title:"Unknown",status:l.UNKNOWN,datetime:h[0].date}):c({title:"Partial Outage",status:l.PARTIAL_OUTAGE,datetime:h[0].date}),a.next=29;break;case 26:a.prev=26,a.t0=a.catch(1),n(a.t0);case 29:return a.prev=29,g(!1),a.finish(29);case 32:case"end":return a.stop()}},a,null,[[1,26,29,32]])})),function(){return a.apply(this,arguments)})()},[]),{systemStatus:b,isLoading:e,error:m}},w=function(){var a=f(p(),2),b=a[0],c=a[1],e=v(),g=e.systemStatus;e.isLoading;var h=(0,k.useState)(0),i=(h[0],h[1]),j=(0,k.useRef)([]);(0,k.useEffect)(function(){var a=function(){var a=window.scrollY,b=0;j.current.forEach(function(c,d){c&&a>=c.offsetTop+60&&(b=d)}),i(b)};return window.addEventListener("scroll",a),function(){return window.removeEventListener("scroll",a)}},[]);var m=function(){return(null==g?void 0:g.status)===l.OPERATIONAL?(0,d.jsxs)("svg",{className:"h-6 w-6 flex-none fill-sky-100 stroke-green-500 stroke-2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11"}),(0,d.jsx)("path",{d:"m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9",fill:"none"})]}):(null==g?void 0:g.status)===l.PARTIAL_OUTAGE?(0,d.jsx)("svg",{className:"h-8 w-8 flex-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"orange",children:(0,d.jsx)("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.94v-.05a21.74 21.74 0 1 1 43.44 0z"})}):(null==g?void 0:g.status)===l.OUTAGE?(0,d.jsx)("svg",{className:"h-8 w-8 flex-none",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 512 512",fill:"red",children:(0,d.jsx)("path",{d:"M256 48C141.31 48 48 141.31 48 256s93.31 208 208 208 208-93.31 208-208S370.69 48 256 48zm0 319.91a20 20 0 1 1 20-20 20 20 0 0 1-20 20zm21.72-201.15-5.74 122a16 16 0 0 1-32 0l-5.74-121.94v-.05a21.74 21.74 0 1 1 43.44 0z"})}):(0,d.jsxs)("svg",{className:"h-6 w-6 flex-none fill-sky-100 stroke-green-500 stroke-2",children:[(0,d.jsx)("circle",{cx:"12",cy:"12",r:"11"}),(0,d.jsx)("path",{d:"m8 13 2.165 2.165a1 1 0 0 0 1.521-.126L16 9",fill:"none"})]})};return(0,d.jsxs)("div",{className:"mt-10 mx-5 md:mx-0",children:[(0,d.jsx)("div",{className:"mx-px md:ml-80 md:mr-80 bg-white dark:bg-slate-800 rounded-xl card",children:(0,d.jsxs)("div",{className:"w-full flex justify-between pt-2 pl-6 pr-6 pb-2",children:[(0,d.jsxs)("div",{className:"flex items-center sm:text-xl text-xs font-semibold leading-7",children:[(0,d.jsx)(m,{}),(0,d.jsx)("p",{className:"ml-3 text-gray-900",children:null==g?void 0:g.title})]}),(0,d.jsxs)("div",{children:[(0,d.jsx)("p",{className:"text-xs text-gray-400",children:"Last updated"}),(0,d.jsx)("p",{className:"text-xs text-gray-400 text-end ",children:null==g?void 0:g.datetime})]})]})}),(0,d.jsxs)("div",{className:"flex flex-col mt-5 md:mx-64",children:[(0,d.jsx)("h1",{className:"text-4xl mx-auto font-normal leading-normal mb-5",children:"Cogoport Health"}),(0,d.jsx)("div",{className:"flex",children:(0,d.jsx)("main",{className:"flex-auto w-3/4 pt-5 pb-96",children:(0,d.jsx)("div",{className:"card-body",children:c?(0,d.jsx)("p",{children:"Loading..."}):(0,d.jsx)("ul",{children:b.map(function(a,b){return(0,d.jsx)("li",{className:"shadow-md bg-white p-5 mb-5 rounded-lg",ref:function(a){return j.current[b]=a},children:(0,d.jsx)(s,{item:a})},a.id)})})})})})]})]})},x=function(){return(0,d.jsxs)("div",{className:"h-full w-full",children:[(0,d.jsx)("div",{className:"mt-20 absolute inset-0 bg-[url(/grid.svg)] bg-center [mask-image:linear-gradient(180deg,white,rgba(255,255,255,0))]"}),(0,d.jsx)("div",{className:"w-full h-40 absolute bg-cogo-primary dark:purple dark:bg-black",children:(0,d.jsx)("div",{className:"sm:ml-0 ml-5 mr-0 mt-3 md:pl-80 md:pr-80 sm:w-full h-full bg-cogo-primary dark:bg-black",children:(0,d.jsx)("img",{src:"/vercel.svg",width:150,height:100,className:"w-40 h-16",alt:"Tailwind Play"})})}),(0,d.jsx)("div",{className:"mt-20 w-full absolute",children:(0,d.jsx)(w,{})})]})}}},function(a){a.O(0,[774,888,179],function(){var b;return a(a.s=8312)}),_N_E=a.O()}])